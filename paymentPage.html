<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Demo MiniApp</title>
        <script src="https://cdn.marmot-cloud.com/npm/hylid-bridge/2.10.0/index.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    </head>

    <body class="bg-gray-100">
        <!-- Container -->
        <div class="min-h-screen flex items-center justify-center p-4">
            <div
                class="w-full max-w-sm bg-white rounded-2xl shadow-lg p-6 space-y-6"
            >
                <!-- Header -->
                <h1 class="text-2xl font-bold text-center text-gray-800">
                    Payment
                </h1>

                <!-- Pay Button -->
                <button
                    onclick="pay()"
                    class="w-full py-4 rounded-xl bg-blue-600 text-white font-bold text-lg active:scale-95 transition"
                >
                    Pay Now
                </button>

                <!-- Back -->
                <button
                    onclick="goBack()"
                    class="w-full text-sm text-gray-500 underline"
                >
                    Back to Login
                </button>
            </div>
        </div>

        <script>
            var token = "";

            function pay() {
                fetch("https://its.mouamle.space/api/payment", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                        Authorization: token,
                    },
                })
                    .then((res) => res.json())
                    .then((data) => {
                        my.tradePay({
                            paymentUrl: data.url,
                            success: (res) => {
                                my.alert({
                                    content: "Payment successful",
                                });
                            },
                        });
                    })
                    .catch((err) => {
                        my.alert({
                            content: "Payment failed",
                        });
                    });
            }
            function goBack() {
                window.location.href = "index.html";
            }
        </script>
    </body>
</html>
